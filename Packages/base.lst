#!/bin/bash
#=============================================================================
# BASE PACKAGES - Core system utilities for Hyprland
#=============================================================================

# Source install function from parent
source "$(dirname "${BASH_SOURCE[0]}")/../Scripts/functions.sh" 2>/dev/null || true

log "${INFO} Installing base system packages..."

# Core system packages
BASE_PACKAGES=(
    # Session Management
    "uwsm"                        # Wayland session manager
    
    # Audio Stack (Pipewire)
    "pipewire"                    # Audio/video server
    "pipewire-alsa"               # ALSA client
    "pipewire-audio"              # Audio client
    "pipewire-pulse"              # PulseAudio replacement
    "gst-plugin-pipewire"         # GStreamer plugin
    "wireplumber"                 # Session manager
    "pavucontrol"                 # Volume control GUI
    "pamixer"                     # CLI mixer
    
    # Network
    "networkmanager"              # Network manager
    "network-manager-applet"      # System tray applet
    
    # Utilities
    "brightnessctl"               # Screen brightness
    "playerctl"                   # Media control
    "udiskie"                     # Auto-mount removable media
    "polkit-gnome"                # Authentication agent
    "xdg-desktop-portal-hyprland" # Screen sharing portal
    "xdg-desktop-portal-gtk"      # File picker
    "xdg-user-dirs"               # User directories
    
    # CLI Tools
    "pacman-contrib"              # Pacman utilities
    "parallel"                    # Parallel processing
    "jq"                          # JSON processor
    "imagemagick"                 # Image processing
    "unzip"                       # Archive extraction
    "vim"                         # Text editor
    "fzf"                         # Fuzzy finder
    "fastfetch"                   # System info
    "libnotify"                   # Notification library
    "wl-clipboard"                # Wayland clipboard
)

for pkg in "${BASE_PACKAGES[@]}"; do
    install_pkg "$pkg"
done

log "${OK} Base packages installation complete"
